<!DOCTYPE html>
<html lang="zh">
    <head>
    <!-- 
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.3.0 -->

    <!-- Title -->
    
    <title>
        
            android需要的Java基础（复习篇） | 
        
        lennyup&#39;s Notes
    </title>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!-- Meta & Info -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="lennyup">
    <meta name="description" content="不得了">
    <meta name="keywords" content="“不得了”">

    <!--iOS -->
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="lennyup&#39;s Notes">

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="https://lennyup.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="android需要的Java基础（复习篇） | lennyup&#39;s Notes">
    <meta property="og:description" content="不得了">
    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    <link rel="stylesheet" href="/css/material.min.css">
    <link rel="stylesheet" href="/css/style.min.css">
    <!-- Config CSS -->


<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }
</style>


<!-- Theme Background Related-->

    <style>
      body {
        /*background-color: #F5F5F5;*/
         background-image: url(https://api.i-meto.com/bing?color=white);
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text {
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>



    <script src="/js/jquery.min.js"></script>
    <script src="/js/queue.js"></script>

    <!-- UC Browser Compatible -->
    <script>
        var agent = navigator.userAgent.toLowerCase();
        if(agent.indexOf('ucbrowser')>0) {
            document.write("<link rel=\"stylesheet\" href=\"/css/uc.css\">");
            alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
        }
    </script>

    

    

    <!-- Bing Background -->
    
        <script type="text/javascript">
            queue.offer(function(){
                $('body').attr('data-original', 'https://api.i-meto.com/bing?color=white');
                $('body.lazy').lazyload();
            });
        </script>
    

    <!-- Custom Head -->
    
</head>


    
        <body id="scheme-Isolation" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                
                    <!-- Isolation Header -->
                    <header class="header">
    <div class="header-wrapper">
        <!-- Header Copyright -->
        <div class="header-copyright">
            <div class="header-site">
                ©&nbsp;
                <script type="text/javascript">
                    var fd = new Date();
                    document.write(fd.getFullYear());
                </script>
                &nbsp;lennyup's Notes
            </div>
            <!--
            I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright.
            It will not impact the appearance and can give developers a lot of support :)

            很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
            它不会影响美观并可以给开发者很大的支持。 :)
            -->
            <div>
                Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a>
                <br>
                Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a>
            </div>
        </div>

        <!-- Header Title -->
        <span class="header-title header-item">
            <a href="/" title="lennyup&#39;s Notes">
                lennyup&#39;s Notes
            </a>
        </span>

        <p class="header-slogan header-item">
            所谓成功，就是不断的经历失败，并且始终保持热情。——丘吉尔
        </p>

        <!-- Header Nav -->
        <nav class="header-nav header-item">
            <span class="header-nav-item">
                <a href="/" title="Home">
                    <span>主页</span>
                </a>
            </span>

          <!-- Independent Pages -->
          
        </nav>

        <!-- Header SNS -->
        <div class="header-item header-sns_list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <i class="fa fa-twitter fa-lg" aria-hidden="true"></i>
        </a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <i class="fa fa-facebook fa-lg" aria-hidden="true"></i>
        </a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <i class="fa fa-google-plus fa-lg" aria-hidden="true"></i>
        </a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Telegram -->
    
</div>

    </div>
</header>

                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    

                    <!-- Post TOC -->

    



<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                


    <!-- Isolation Post Header -->
    <!-- Post thumbnail -->
    
        <!-- Post Header Info -->
        <div class="post-header_info without-thumbnail">
            <!-- Author Avatar & Name -->
            <img src="/img/avatar.png" class="avatar-img" width="44px" height="44px" alt="lennyup's avatar">
            <span class="name-span">lennyup</span>
        </div>

        <!-- Null Thumbnail -->
        <div class="post_thumbnail-null">
    
        </div>



                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    

    
        <div class="post-content_wrapper">
            <p class="post-title">
                android需要的Java基础（复习篇）
            </p>
            <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>这段时间，项目基本完成，进入测试上线阶段，终于可以闲下来查漏补缺了，这里我将复习下android所需要的java基础，也可以帮大家回忆一下，今年的Google IO 大会上，Google宣布Kotlin成为Android的官方语言，有兴趣的可以去学习下，Java作为android的第一个语言，还是需要把打这部分知识打牢固的。(这部分内容只是当作自己的复习)</p>
<h4 id="1、三大特性"><a href="#1、三大特性" class="headerlink" title="1、三大特性"></a>1、三大特性</h4><p>Java做为面向对象的语言，他的三大特性：<code>继承</code>、<code>封装</code>、<code>多态</code>。</p>
<h4 id="2、6大原则"><a href="#2、6大原则" class="headerlink" title="2、6大原则"></a>2、6大原则</h4><h5 id="单一职责原则（Single-Responsibility-Principle）"><a href="#单一职责原则（Single-Responsibility-Principle）" class="headerlink" title="单一职责原则（Single Responsibility Principle）"></a>单一职责原则（Single Responsibility Principle）</h5><p>定义： 不要存在多于一个导致类变更的原因。也就是说，一个类只负责一项职责</p>
<p>案例：工厂A负责生产面包和牛奶，当生产面包的需求发生变化时，需要改变工厂生产模式，这事就有可能影响牛奶的生产。</p>
<p>解决方案：遵循单一职责原则，分别建立两个子公司，一个负责生产面包，一个负责生产牛奶，这样如果面包需求变了就不会影响牛奶的生产了。</p>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">public class Factory &#123;</div><div class="line">	public Factory () &#123;</div><div class="line">		super();</div><div class="line">	&#125;</div><div class="line">	public void product() &#123;</div><div class="line">		System.out.println(“生产饼干”)；</div><div class="line">		System.out.println(“生产葡萄干”);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">public class Main &#123;</div><div class="line">	public static void main (String [] args) &#123;</div><div class="line">		new Factory.product();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>遵循单一职责原则，做如下修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">public class FactoryA &#123;</div><div class="line">	public void product() &#123;</div><div class="line">		System.out.println(“生产饼干”);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class FactoryB &#123;</div><div class="line">	public void product() &#123;</div><div class="line">		System.out.println(“生产葡萄干”);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">public class Factory &#123;</div><div class="line">	private FactoryA mA;</div><div class="line">	private FactoryB mB;</div><div class="line">	public Factory () &#123;</div><div class="line">		super();</div><div class="line">		mA = new FactoryA();</div><div class="line">		mB = new FactoryB();</div><div class="line">	&#125;</div><div class="line">	public void product() &#123;</div><div class="line">		mA.product();</div><div class="line">		mB.product();</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我理解的单一职责原则就是在开发过程中尽量将一些类的职责明确、唯一。</p>
<p>遵循单一职责的优点：</p>
<ul>
<li>降低复杂度</li>
<li>提高可读性</li>
<li>降低对其他功能的影响</li>
</ul>
<p>可是可能由于职责的颗粒化，我们往往会违背这个原则，这个原因为职责扩散（就是因为某些原因，我们要吧职责之一再次细分）<br>关于这部分请看 <a href="http://blog.csdn.net/zhengzhb/article/details/7278174" target="_blank" rel="external">单一职责原则（1）</a></p>
<h5 id="里氏替换原则-（Liskov-Substitutiion-Principle）"><a href="#里氏替换原则-（Liskov-Substitutiion-Principle）" class="headerlink" title="里氏替换原则 （Liskov Substitutiion Principle）"></a>里氏替换原则 （Liskov Substitutiion Principle）</h5><p>定义：所有引用基类的地方必须能够透明地使用其子类的对象</p>
<p>通俗的说，就是用父类的地方可以用子类去代替，但是用子类的地方用父类不一定能代替。</p>
<p>里氏替换原则包含4层含义：</p>
<ol>
<li>子类必须完全实现父类的方法</li>
<li>子类可以有自己的方法</li>
<li>当子类的方法重载父类的方法时，形参要比父类的范围更大</li>
<li>当子类的方法实现父类的抽象方法时，方法的返回值要比父类更严格</li>
</ol>
<p>例子：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div></pre></td><td class="code"><pre><div class="line">public class Test &#123;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		Man m = new Man();</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">abstract class Cat &#123;</div><div class="line">	public void eat()&#123;&#125;</div><div class="line">&#125;</div><div class="line">/**</div><div class="line">* 人可以喂猫吃东西，可以有不同种类的猫</div><div class="line">*/</div><div class="line">class Man &#123;</div><div class="line">	private Cat mCat;</div><div class="line">	public void setCat(Cat mCat) &#123;</div><div class="line">		this.mCat = mCat;</div><div class="line">	&#125;</div><div class="line">	public void feed() &#123;</div><div class="line">		mCat.eat();</div><div class="line">		System.out.println(&quot;正在进食...&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Garfield extends Cat &#123;</div><div class="line">	@Override</div><div class="line">	public void eat() &#123;</div><div class="line">		System.out.println(&quot;加菲猫进食...&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line">class Folds extends Cat &#123;</div><div class="line">	@Override</div><div class="line">	public void eat() &#123;</div><div class="line">		System.out.println(&quot;折耳猫进食...&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>优点： 可以对后期版本升级，增添子类时都可以很好的维护</p>
<h5 id="依赖倒置原则（Dependence-Inversion-Principle）"><a href="#依赖倒置原则（Dependence-Inversion-Principle）" class="headerlink" title="依赖倒置原则（Dependence Inversion Principle）"></a>依赖倒置原则（Dependence Inversion Principle）</h5><p>定义： 高层模块不应该依赖底层模块，应该依赖其抽象，抽象不应该依赖其细节，细节应该依赖其抽象。</p>
<p>底层模块：负责基本的操作</p>
<p>高层模块：由多个底层模块组成，负责复杂的操作</p>
<p>抽象：在Java中指的是接口或者抽象类</p>
<p>依赖倒置的核心思想是面向接口编程，相对于细节的多变性，抽象的稳定性更高一些。以抽象为基础搭建起来的架构比以细节搭建起来的框架稳定的多。下面我们用例子来解释下依赖倒置原则。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line">class Bread &#123;</div><div class="line">	public String getContent () &#123;</div><div class="line">		return &quot;面包生产出来了&quot;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Factory &#123;</div><div class="line">	public void poduct(Bread bread) &#123;</div><div class="line">		System.out.println(&quot;工厂开始生产&quot;);  </div><div class="line">       System.out.println(book.getContent());</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class Test &#123;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		Factory mFactory = new Factory();</div><div class="line">		mFactory.poduct(new Bread());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>假如现在需求变了，不再生产面包，改为生产牛奶，这个时候工厂是做不了的，它只能生产面包。这样的话耦合性就会很高了。</p>
<p>遵循以来倒置的原则，我们做如下修改：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">interface Model &#123;</div><div class="line">	public String getContent();</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">class NewBread implements Model &#123;</div><div class="line">	public String getContent() &#123;</div><div class="line">		return &quot;面包生产出来了&quot;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Milk implements Model &#123;</div><div class="line">	public String getContent() &#123;</div><div class="line">		return &quot;牛奶生产出来了&quot;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Factory &#123;</div><div class="line">	public void product(Model model) &#123;</div><div class="line">		System.out.println(&quot;工厂开始生产&quot;)</div><div class="line">		System.out.println(model.getContent());</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class Test &#123;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		Factory mFactory = new Factory();</div><div class="line">		mFactory.product(new NewBread());</div><div class="line">		mFactory.product(new Milk())</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>依赖有三种写法</p>
<h6 id="1、构造函数传递依赖"><a href="#1、构造函数传递依赖" class="headerlink" title="1、构造函数传递依赖"></a>1、构造函数传递依赖</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">class Factory &#123;</div><div class="line">	private Model model</div><div class="line">	public Factory(Model model) &#123;</div><div class="line">		this.model = model;</div><div class="line">	&#125;</div><div class="line">	public void product () &#123;</div><div class="line">		System.out.println(&quot;工厂开始生产&quot;)</div><div class="line">		System.out.println(model.getContent());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="2、setter方法传递"><a href="#2、setter方法传递" class="headerlink" title="2、setter方法传递"></a>2、setter方法传递</h6><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">class Factory &#123;</div><div class="line">	private Model model</div><div class="line">	public void setModel(Model model) &#123;</div><div class="line">		this.model = model;</div><div class="line">	&#125;</div><div class="line">	public void product () &#123;</div><div class="line">		System.out.println(&quot;工厂开始生产&quot;)</div><div class="line">		System.out.println(model.getContent());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h6 id="3、接口传递依赖"><a href="#3、接口传递依赖" class="headerlink" title="3、接口传递依赖"></a>3、接口传递依赖</h6><p>如 最开始给的例子</p>
<h5 id="接口隔离原则-（Interface-segregation-Principle）"><a href="#接口隔离原则-（Interface-segregation-Principle）" class="headerlink" title="接口隔离原则 （Interface segregation Principle）"></a>接口隔离原则 （Interface segregation Principle）</h5><p>定义：客户端不应该依赖它不需要的接口，类间的依赖关系应该建立在最小的接口上。</p>
<p>我们用一个例子来说明下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div></pre></td><td class="code"><pre><div class="line">interface I &#123;</div><div class="line">	public void m1();</div><div class="line">	public void m2();</div><div class="line">	public void m3();</div><div class="line">	public void m4();</div><div class="line">&#125;</div><div class="line"></div><div class="line">class B implements I &#123;</div><div class="line">	public void m1() &#123;</div><div class="line">		System.out.println(&quot;类B实现接口I的方法1&quot;);</div><div class="line">	&#125;</div><div class="line">	public void m2() &#123;</div><div class="line">		System.out.println(&quot;类B实现接口I的方法2&quot;);</div><div class="line">	&#125;</div><div class="line">	public void m3()&#123;&#125;</div><div class="line">	public void m4()&#123;&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class A &#123;</div><div class="line">	public void depend1(I i) &#123;</div><div class="line">		i.m1();</div><div class="line">	&#125;</div><div class="line">	public void depend2(I i) &#123;</div><div class="line">		i.m2();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class C &#123;</div><div class="line">	public void depend1(I i) &#123;</div><div class="line">		i.m3();</div><div class="line">	&#125;</div><div class="line">	public void depend2(I i) &#123;</div><div class="line">		i.m4();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class D implements I &#123;</div><div class="line">	public void m1() &#123;</div><div class="line">		</div><div class="line">	&#125;</div><div class="line">	public void m2() &#123;</div><div class="line">	</div><div class="line">	&#125;</div><div class="line">	public void m3()&#123;</div><div class="line">		System.out.println(&quot;类D实现接口I的方法3&quot;);</div><div class="line">	&#125;</div><div class="line">	public void m4()&#123;</div><div class="line">		System.out.println(&quot;类D实现接口I的方法4&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class Client &#123;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		  A a = new A();  </div><div class="line">        a.depend1(new B());  </div><div class="line">        a.depend2(new B());            </div><div class="line">        C c = new C();  </div><div class="line">        c.depend1(new D());  </div><div class="line">        c.depend2(new D()); </div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>可以看到，对了类B来说 方法3和方法4是不需要的，但是由于接口I中有这两个方法，所以必须实现它。同理，对于类D来说，方法1和方法2是不需要的。这样的话就不符合接口隔离原则，下面我们修改一下以符合其原则：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div></pre></td><td class="code"><pre><div class="line">interface I &#123;</div><div class="line">	public void m1();</div><div class="line">	public void m2();</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line">interface I1 &#123;</div><div class="line">	public void m3();</div><div class="line">	public void m4();</div><div class="line">&#125;</div><div class="line"></div><div class="line">class B implements I &#123;</div><div class="line">	public void m1() &#123;</div><div class="line">		System.out.println(&quot;类B实现接口I的方法1&quot;);</div><div class="line">	&#125;</div><div class="line">	public void m2() &#123;</div><div class="line">		System.out.println(&quot;类B实现接口I的方法2&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class A &#123;</div><div class="line">	public void depend1(I i) &#123;</div><div class="line">		i.m1();</div><div class="line">	&#125;</div><div class="line">	public void depend2(I i) &#123;</div><div class="line">		i.m2();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class C &#123;</div><div class="line">	public void depend1(I1 i) &#123;</div><div class="line">		i.m3();</div><div class="line">	&#125;</div><div class="line">	public void depend2(I1 i) &#123;</div><div class="line">		i.m4();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class D implements I1 &#123;</div><div class="line">	public void m3()&#123;</div><div class="line">		System.out.println(&quot;类D实现接口I的方法3&quot;);</div><div class="line">	&#125;</div><div class="line">	public void m4()&#123;</div><div class="line">		System.out.println(&quot;类D实现接口I的方法4&quot;);</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我理解的接口隔离原则是：建立单一的接口，尽量接口细化，不要建立臃肿的接口，接口中的方法尽量少。</p>
<p>接口隔离原则是对接口进行的规范约束，应该要主要一下几点（摘自《设计模式之禅》）</p>
<ul>
<li>接口尽量小</li>
</ul>
<p>接口在遵循单一职责原则的情况下，尽量减少和接口中方法，不不是无休止的细化接口。</p>
<ul>
<li>高内聚</li>
</ul>
<p>高内聚是提高接口、类、模块的处理能力，减少对外的交互。在接口中尽量少公布public方法，接口是对外的承诺，承诺越少对外越有利，变更的风险也就越少，同时有利于降低成本</p>
<ul>
<li>定制服务</li>
</ul>
<p>根据需求分析，必要时为特殊用户提供定制的接口，尽量避免不同操作人群使用同一接口，这样会降低系统的享用速度和扩展性。</p>
<ul>
<li>接口设计是有限度的</li>
</ul>
<p>根据开发情景划分设计接口，在开发过程中接口设计的颗粒度越小，系统灵活性越高。并不是以为的将接口细化。 </p>
<h4 id="迪米特法则（Low-of-Demeter-LoD）"><a href="#迪米特法则（Low-of-Demeter-LoD）" class="headerlink" title="迪米特法则（Low of Demeter,LoD）"></a>迪米特法则（Low of Demeter,LoD）</h4><p><code>定义</code>：一个对象应该对其他对象有最少的了解，只与直接的朋友通信。</p>
<p><code>朋友关系</code>：每个对象都必然会与其他对象有耦合关系，两个对象之间的耦合关系就称为朋友关系。</p>
<p>迪米特法则定义的是类之间的关系要低耦合，一个类中的朋友不要太多，这样后期维护起来比较方便。</p>
<p>举个例子：老师清点人数，老师通过班长清点人数。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">public class Teacher &#123;</div><div class="line">	public void command (ClassMonitor classMonitor) &#123;</div><div class="line">		List&lt;Student&gt; list = new ArrayList&lt;Student&gt;();</div><div class="line">		for(int i=0;i&lt;20;i++) &#123;</div><div class="line">			list.add(new Student());</div><div class="line">		&#125;</div><div class="line">		classMonitor.count(list)</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class ClassMonitor &#123;</div><div class="line">	public void count(List&lt;Student&gt; list) &#123;</div><div class="line">		System.out.println(&quot;班长说：全班的人数是。。。&quot;+list.size());</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Student &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class Test &#123;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		new Teacher().command(new ClassMonitor());</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>在Teacher类中，一个方法调用的两个类的实例，分别是ClassMonitor和Student类。对于Teacher类来说，朋友类只有ClassMonitor，迪米特法则告诉我们只与朋友类通信，所以这种设计就违反了迪米特法则。</p>
<p>在Java中朋友的定义为：出现在成员变量。方法的输入输出类称为朋友类，在方法体内的类不属于朋友类</p>
<p>我们改进一下，以复合迪米特法则</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">public class Teacher &#123;</div><div class="line">	public void command (ClassMonitor classMonitor) &#123;</div><div class="line">		classMonitor.count();</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class ClassMonitor &#123;</div><div class="line">	List&lt;Student&gt; list;</div><div class="line">	public ClassMonitor(List&lt;Student&gt; list) &#123;</div><div class="line">		this.list = list;</div><div class="line">	&#125;</div><div class="line">	public void count(List&lt;Student&gt; list) &#123;</div><div class="line">		System.out.println(&quot;班长说：全班的人数是。。。&quot;+list.size());</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class Student &#123;</div><div class="line">&#125;</div><div class="line"></div><div class="line">public class Test &#123;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		List&lt;Student&gt; list = new ArrayList&lt;Student&gt;();</div><div class="line">		for(int i=0;i&lt;20;i++) &#123;</div><div class="line">			list.add(new Student());</div><div class="line">		&#125;</div><div class="line">		new Teacher().command(new ClassMonitor(list));</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>迪米特法则给类的低耦合提出了四个基本要求</p>
<h6 id="1-只和朋友类交流"><a href="#1-只和朋友类交流" class="headerlink" title="1. 只和朋友类交流"></a>1. 只和朋友类交流</h6><h6 id="2-朋友间也是有距离的"><a href="#2-朋友间也是有距离的" class="headerlink" title="2. 朋友间也是有距离的"></a>2. 朋友间也是有距离的</h6><pre><code>在java中的实现思想就是：类A与类B之间有依赖关系，并在方法输入或输出中创建该类的实例，那么他们属于朋友类，但是类A不可以过分操作类B的方法
</code></pre><h6 id="3-是自己的就是自己的"><a href="#3-是自己的就是自己的" class="headerlink" title="3. 是自己的就是自己的"></a>3. 是自己的就是自己的</h6><pre><code>如果一个方法放在本类中，既不增加类间关系，也对本类不产生负面影响，那就放置在本类中
</code></pre><h6 id="4-谨慎使用serializable"><a href="#4-谨慎使用serializable" class="headerlink" title="4. 谨慎使用serializable"></a>4. 谨慎使用serializable</h6><h4 id="开闭原则（Open-Closed-Principle，OCP）"><a href="#开闭原则（Open-Closed-Principle，OCP）" class="headerlink" title="开闭原则（Open Closed Principle，OCP）"></a>开闭原则（Open Closed Principle，OCP）</h4><p>定义：一个软件实体如类、模块和函数应该对扩展开发，对修改关闭。即软件实体应尽量在不修改原有代码的情况下进行扩展。</p>
<p>软件实体包括：</p>
<ul>
<li>项目或软件产品中按照一定的逻辑规则划分的模块</li>
<li>抽象和类</li>
<li>方法</li>
</ul>
<p>一个实例</p>
<ul>
<li>IMilk 定义了两个属性：厂商和价格</li>
<li>Supermarket是超市</li>
<li>NovelMilk是一个具体的实现类</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div></pre></td><td class="code"><pre><div class="line">public class Supermarket &#123;</div><div class="line">	public static List&lt;NovelMilk&gt; list = new ArrayList&lt;NovelMilk&gt;();</div><div class="line">	static &#123;</div><div class="line">		list.add(new NovelMilk(&quot;伊利&quot;, 60))</div><div class="line">		list.add(new NovelMilk(&quot;安慕希&quot;,55))</div><div class="line">	&#125;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		for(NovelMilk milk: list) &#123;</div><div class="line">			System.out.println(&quot;牛奶厂商&quot; + milk.getManufacturers()+&quot;\t 价格：&quot;+ milk.getPrice()+ &quot;元&quot;)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface IMilk &#123;</div><div class="line">	public String getManufacturers();</div><div class="line">	public int getPrice();</div><div class="line">&#125;</div><div class="line"></div><div class="line">class NovelMilk implements IMilk &#123;</div><div class="line">	private int price;</div><div class="line">	private String manufacturers;</div><div class="line">	public NovelMilk(String manufacturers, int price) &#123;</div><div class="line">		this.manufacturers = manufacturers;</div><div class="line">		this.price = price;</div><div class="line">	&#125;</div><div class="line">		@Override</div><div class="line">	public int getPrice() &#123;</div><div class="line">		// TODO Auto-generated method stub</div><div class="line">		return this.price;</div><div class="line">	&#125;</div><div class="line">		@Override</div><div class="line">	public String getManufacturers() &#123;</div><div class="line">		// TODO Auto-generated method stub</div><div class="line">		return this.manufacturers;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>需求更改：超市进行打折促销，规定 50元以下的 9折出售。</p>
<p>如果要在NovelMilk中修改的话，修改量就会很大，而且违背了开闭原则，<br>解决方案：通过扩展实现变化</p>
 <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line"> public class Supermarket &#123;</div><div class="line">	public static List&lt;NovelMilk&gt; list = new ArrayList&lt;NovelMilk&gt;();</div><div class="line">	static &#123;</div><div class="line">		list.add(new OffNovelMilk(&quot;伊利&quot;, 60))</div><div class="line">		list.add(new OffNovelMilk(&quot;安慕希&quot;,55))</div><div class="line">	&#125;</div><div class="line">	public static void main(String [] args) &#123;</div><div class="line">		for(NovelMilk milk: list) &#123;</div><div class="line">			System.out.println(&quot;牛奶厂商&quot; + milk.getManufacturers()+&quot;\t 价格：&quot;+ milk.getPrice()+ &quot;元&quot;)</div><div class="line">		&#125;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">interface IMilk &#123;</div><div class="line">	public String getManufacturers();</div><div class="line">	public int getPrice();</div><div class="line">&#125;</div><div class="line"></div><div class="line">class NovelMilk implements IMilk &#123;</div><div class="line">	private int price;</div><div class="line">	private String manufacturers;</div><div class="line">	public NovelMilk(String manufacturers, int price) &#123;</div><div class="line">		this.manufacturers = manufacturers;</div><div class="line">		this.price = price;</div><div class="line">	&#125;</div><div class="line">		@Override</div><div class="line">	public int getPrice() &#123;</div><div class="line">		// TODO Auto-generated method stub</div><div class="line">		return this.price;</div><div class="line">	&#125;</div><div class="line">		@Override</div><div class="line">	public String getManufacturers() &#123;</div><div class="line">		// TODO Auto-generated method stub</div><div class="line">		return this.manufacturers;</div><div class="line">	&#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">class OffNovelMilk extends NovelMilk&#123;</div><div class="line"></div><div class="line">	public OffNovelMilk(String manufacturers, int price) &#123;</div><div class="line">		super(manufacturers, price);</div><div class="line">		// TODO Auto-generated constructor stub</div><div class="line">	&#125;</div><div class="line">	</div><div class="line">	@Override</div><div class="line">	public int getPrice() &#123;</div><div class="line">		int rePrice = super.getPrice();</div><div class="line">		int nowPrice = 0;</div><div class="line">		if(rePrice&lt;50)&#123;</div><div class="line">			nowPrice = rePrice*90/100;</div><div class="line">		&#125;else&#123;</div><div class="line">			nowPrice = rePrice;</div><div class="line">		&#125;</div><div class="line">		return nowPrice;</div><div class="line">	&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
        </div>
    
</div>


                
                    <!-- Paradox Post Info -->
                    
                

                <!-- Post Comments -->
                
                    
    <!-- 使用多说评论 -->
    <link rel="stylesheet" href="/css/duoshuo.min.css">
<style>
    #ds-thread #ds-reset .ds-post-button{
        background-color: #0097A7 !important;
    }
    #ds-wrapper #ds-reset .ds-icons-32{
        background-color: #0097A7 !important;
    }
    #ds-reset .ds-highlight {
        color: #0097A7 !important;
    }
</style>
<div id="comments">
    <!-- 多说评论框 start -->
    <div class="ds-thread"
        data-thread-key="2017/09/22/android-java/"
        data-url="https://lennyup.github.io/2017/09/22/android-java/"
        data-title="android需要的Java基础（复习篇）" id="ds-thread">
    </div>
    <!-- 多说评论框 end -->
</div>






                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/2017/09/20/android-interview/" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
</footer>


                    <!-- Import File -->
<script src="/js/lazyload.min.js"></script>
<script src="/js/js.min.js"></script>
<script src="/js/nprogress.js"></script>

<script type="text/javascript">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>





    <!-- Leancloud -->
    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>
        AV.initialize('WPJ4R6qYeJQjJl3KmMAJoME0-gzGzoHsz', 'iRC9fkt9xkx9KoqFepPypBJP');
    </script>
    <script>
    function showTime(Counter) {
        var query = new AV.Query(Counter);
        $('.leancloud-views_num').each(function() {
            var url = $(this).attr('id').trim();
            query.equalTo('url', url);
            query.find({
                success: function(results) {
                    if (results.length === 0) {
                        var content = '0 ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                        return;
                    }
                    for (var i = 0; i < results.length; i++) {
                        var object = results[i];
                        var content = object.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    }
                },
                error: function(object, error) {
                    console.log('Error: ' + error.code + ' ' + error.message);
                }
            });
        });
    }

    function addCount(Counter) {
      var Counter = AV.Object.extend('Counter');
      url = $('.leancloud-views_num').attr('id').trim();
      title = $('.leancloud-views_num').attr('data-flag-title').trim();
      var query = new AV.Query(Counter);
      query.equalTo('url', url);
      query.find({
          success: function(results) {
            if (results.length > 0) {
                var counter = results[0];
                counter.fetchWhenSave(true);
                counter.increment('time');
                counter.save(null, {
                    success: function(counter) {
                        var content =  counter.get('time') + ' ' + $(document.getElementById(url)).text();
                        $(document.getElementById(url)).text(content);
                    },
                    error: function(counter, error) {
                        console.log('Failed to save Visitor num, with error message: ' + error.message);
                    }
                });
            } else {
              var newcounter = new Counter();
              newcounter.set('title', title);
              newcounter.set('url', url);
              newcounter.set('time', 1);
              newcounter.save(null, {
                  success: function(newcounter) {
                      console.log('newcounter.get(\'time\')='+newcounter.get('time'));
                      var content = newcounter.get('time') + ' ' + $(document.getElementById(url)).text();
                      $(document.getElementById(url)).text(content);
                  },
                  error: function(newcounter, error) {
                      console.log('Failed to create');
                  }
              });
            }
        },
        error: function(error) {
            console.log('Error:' + error.code + ' ' + error.message);
        }
      });
    }
    $(function() {
        var Counter = AV.Object.extend('Counter');
        if ($('.leancloud-views_num').length === 1) {
            addCount(Counter);
        } else if ($('.post-title-link').length > 1) {
            showTime(Counter);
        }
    });
</script>




    <!-- Busuanzi -->
    <script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>



    <!-- 多说公共 js 代码 start -->
    <script type="text/javascript">
        queue.offer(function(){
            window.duoshuoQuery = {
                short_name: 'lennyupio'
            };
            (function() {
                var ds = document.createElement('script');
                ds.type = 'text/javascript';
                ds.async = true;
                ds.src = 'https://static.duoshuo.com/embed.js';
                ds.charset = 'UTF-8';
                (document.getElementsByTagName('head')[0]
                 || document.getElementsByTagName('body')[0]).appendChild(ds);
            })();
        });
    </script>
    <!-- 多说公共 js 代码 end -->





<!-- Swiftye -->


<!-- Local Search-->


<!-- Window Load-->
<script>
    $(window).load(function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });
</script>

<!-- MathJax Load-->


                </main>
            </div>
        </body>
    
</html>
